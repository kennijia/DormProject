<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="edu.wbu.dorm.mapper.DormApplicationMapper" >
    <select id="findOldById" resultType="dormApplication" parameterType="String">
        SELECT * FROM dormapplication where status != 0 and pid = #{pid}
    </select>
    <select id="findNewById" resultType="dormApplication" parameterType="String">
        SELECT * FROM dormapplication where status = 0 and pid = #{pid}
    </select>
    <insert id="insertApplication" parameterType="dormApplication">
        insert into dormapplication values (null,#{pid},#{reason},#{to_db_id},#{to_dorm_id},0)
    </insert>
    <delete id="deleteApplication" parameterType="int">
        delete from dormapplication where id = #{id}
    </delete>
    <select id="findOne" parameterType="int" resultType="dormApplication">
        select * from dormapplication where id = #{id}
    </select>
    <update id="updateApplication" parameterType="dormApplication">
        update dormapplication set reason = #{reason} ,to_db_id = #{to_db_id},to_dorm_id = #{to_dorm_id} where id = #{id}
    </update>
</mapper>